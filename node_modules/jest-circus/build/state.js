'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.setState =
  exports.resetState =
  exports.getState =
  exports.dispatchSync =
  exports.dispatch =
  exports.addEventHandler =
  exports.ROOT_DESCRIBE_BLOCK_NAME =
    void 0;
<<<<<<< HEAD

var _eventHandler = _interopRequireDefault(require('./eventHandler'));

var _formatNodeAssertErrors = _interopRequireDefault(
  require('./formatNodeAssertErrors')
);

var _types = require('./types');

var _utils = require('./utils');

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {default: obj};
}

/**
 * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.
=======
var _eventHandler = _interopRequireDefault(require('./eventHandler'));
var _formatNodeAssertErrors = _interopRequireDefault(
  require('./formatNodeAssertErrors')
);
var _types = require('./types');
var _utils = require('./utils');
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {default: obj};
}
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
>>>>>>> 0df6b5ffd0a73ba47ae7921ccf86e80e012f120e
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
<<<<<<< HEAD
const eventHandlers = [_eventHandler.default, _formatNodeAssertErrors.default];
const ROOT_DESCRIBE_BLOCK_NAME = 'ROOT_DESCRIBE_BLOCK';
exports.ROOT_DESCRIBE_BLOCK_NAME = ROOT_DESCRIBE_BLOCK_NAME;

=======

const eventHandlers = [_eventHandler.default, _formatNodeAssertErrors.default];
const ROOT_DESCRIBE_BLOCK_NAME = 'ROOT_DESCRIBE_BLOCK';
exports.ROOT_DESCRIBE_BLOCK_NAME = ROOT_DESCRIBE_BLOCK_NAME;
>>>>>>> 0df6b5ffd0a73ba47ae7921ccf86e80e012f120e
const createState = () => {
  const ROOT_DESCRIBE_BLOCK = (0, _utils.makeDescribe)(
    ROOT_DESCRIBE_BLOCK_NAME
  );
  return {
    currentDescribeBlock: ROOT_DESCRIBE_BLOCK,
    currentlyRunningTest: null,
    expand: undefined,
    hasFocusedTests: false,
    hasStarted: false,
    includeTestLocationInResult: false,
<<<<<<< HEAD
    parentProcess: null,
    rootDescribeBlock: ROOT_DESCRIBE_BLOCK,
=======
    maxConcurrency: 5,
    parentProcess: null,
    rootDescribeBlock: ROOT_DESCRIBE_BLOCK,
    seed: 0,
>>>>>>> 0df6b5ffd0a73ba47ae7921ccf86e80e012f120e
    testNamePattern: null,
    testTimeout: 5000,
    unhandledErrors: []
  };
};

<<<<<<< HEAD
const resetState = () => {
  global[_types.STATE_SYM] = createState();
};

exports.resetState = resetState;
resetState();

const getState = () => global[_types.STATE_SYM];

exports.getState = getState;

const setState = state => (global[_types.STATE_SYM] = state);

exports.setState = setState;

=======
/* eslint-disable no-restricted-globals */
const resetState = () => {
  global[_types.STATE_SYM] = createState();
};
exports.resetState = resetState;
resetState();
const getState = () => global[_types.STATE_SYM];
exports.getState = getState;
const setState = state => (global[_types.STATE_SYM] = state);
/* eslint-enable */
exports.setState = setState;
>>>>>>> 0df6b5ffd0a73ba47ae7921ccf86e80e012f120e
const dispatch = async event => {
  for (const handler of eventHandlers) {
    await handler(event, getState());
  }
};
<<<<<<< HEAD

exports.dispatch = dispatch;

=======
exports.dispatch = dispatch;
>>>>>>> 0df6b5ffd0a73ba47ae7921ccf86e80e012f120e
const dispatchSync = event => {
  for (const handler of eventHandlers) {
    handler(event, getState());
  }
};
<<<<<<< HEAD

exports.dispatchSync = dispatchSync;

const addEventHandler = handler => {
  eventHandlers.push(handler);
};

=======
exports.dispatchSync = dispatchSync;
const addEventHandler = handler => {
  eventHandlers.push(handler);
};
>>>>>>> 0df6b5ffd0a73ba47ae7921ccf86e80e012f120e
exports.addEventHandler = addEventHandler;
